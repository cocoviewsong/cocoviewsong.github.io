import{d as i,r as b,E as w,f as _,o as l,c as S,h as g,$ as y,_ as B,a4 as x}from"./index-B3aFaRz9.js";const L=i({__name:"CoVideo",props:{videoList:{},width:{},height:{}},setup(r){const a=r,{videoList:c,width:p,height:m}=a,u=b(null),f=w(()=>({width:`${String(p)}px`,height:`${String(m)}px`})),o=new MediaSource;let e=null,n=0;const v=()=>{try{e=o.addSourceBuffer('video/webm; codecs="vp8, vorbis"')}catch(s){console.error("无法添加 sourceBuffer:",s)}e&&e.addEventListener("updateend",()=>{console.log("视频数据添加完成",e==null?void 0:e.buffered),console.log("mediaSource 状态:",o.readyState),d()}),d()},d=()=>{var s;n<c.length?h(n):o.readyState==="open"&&e&&!e.updating&&(o.endOfStream(),(s=u.value)==null||s.play().catch(t=>console.error("播放错误:",t)))},h=s=>{fetch(c[s]).then(t=>t.arrayBuffer()).then(t=>{e&&!e.updating&&o.readyState==="open"&&(console.log("添加视频段数据"),e.appendBuffer(new Uint8Array(t)),n++)}).catch(t=>{console.error("加载视频段失败:",t)})};return console.log(MediaSource.isTypeSupported('video/webm; codecs="vp8, vorbis"')),console.log(MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),_(()=>{u.value&&(u.value.src=URL.createObjectURL(o)),o.addEventListener("sourceopen",v)}),(s,t)=>(l(),S("div",{class:"co-video",style:y(f.value)},[g("video",{ref_key:"videoPlayer",ref:u,controls:"",muted:""},null,512)],4))}}),C=B(L,[["__scopeId","data-v-85a4014e"]]),T="/assets/output000-C3AdT2Zc.webm",D="/assets/output001-CT2NMvA_.webm",E="/assets/output002-BTqmBDbT.webm",V="/assets/output003-D23VtXba.webm",M="/assets/output004-alNIARYv.webm",N="/assets/output005-DaLlEcJU.webm",U="/assets/output006-gwBCGOfG.webm",k="/assets/output007-DrlPmhmt.webm",A="/assets/output008-C3TVm3H3.webm",I="/assets/output009-Bpyf4f9u.webm",O="/assets/output010-DIVsip0_.webm",Z="/assets/output011-DrSS1ZUT.webm",$="/assets/output012-CH2o9eNQ.webm",P="/assets/output013-lLZZbgoD.webm",G=i({__name:"index",setup(r){const a=[T,D,E,V,M,N,U,k,A,I,O,Z,$,P];return(c,p)=>(l(),x(C,{videoList:a,width:"900",height:"600"}))}});export{G as default};
