import{Y as k,aJ as O,C as I,r as v,B as b,aA as R,U as A,G as E,X as h,i as S,E as L,o as V,H as W,at as H,ad as P,aK as B}from"./index-DmBhjwxV.js";var w=typeof window<"u";function y(n){return w?requestAnimationFrame(n):-1}function X(n){y(()=>y(n))}var D=n=>n===window,x=(n,e)=>({top:0,left:0,right:n,bottom:e,width:n,height:e}),q=n=>{const e=h(n);if(D(e)){const t=e.innerWidth,i=e.innerHeight;return x(t,i)}return e!=null&&e.getBoundingClientRect?e.getBoundingClientRect():x(0,0)};function G(n){const e=k(n,null);if(e){const t=S(),{link:i,unlink:o,internalChildren:s}=e;i(t),O(()=>o(t));const r=I(()=>s.indexOf(t));return{parent:e,index:r}}return{parent:null,index:v(-1)}}function N(n){const e=[],t=i=>{Array.isArray(i)&&i.forEach(o=>{var s;P(o)&&(e.push(o),(s=o.component)!=null&&s.subTree&&(e.push(o.component.subTree),t(o.component.subTree.children)),o.children&&t(o.children))})};return t(n),e}var C=(n,e)=>{const t=n.indexOf(e);return t===-1?n.findIndex(i=>e.key!==void 0&&e.key!==null&&i.type===e.type&&i.key===e.key):t};function M(n,e,t){const i=N(n.subTree.children);t.sort((s,r)=>C(i,s.vnode)-C(i,r.vnode));const o=t.map(s=>s.proxy);e.sort((s,r)=>{const d=o.indexOf(s),a=o.indexOf(r);return d-a})}function $(n){const e=b([]),t=b([]),i=S();return{children:e,linkChildren:s=>{L(n,Object.assign({link:a=>{a.proxy&&(t.push(a),e.push(a.proxy),M(i,e,t))},unlink:a=>{const u=t.indexOf(a);e.splice(u,1),t.splice(u,1)},children:e,internalChildren:t},s))}}}function _(n){let e;V(()=>{n(),W(()=>{e=!0})}),H(()=>{e&&n()})}function Q(n,e,t={}){if(!w)return;const{target:i=window,passive:o=!1,capture:s=!1}=t;let r=!1,d;const a=l=>{if(r)return;const c=h(l);c&&!d&&(c.addEventListener(n,e,{capture:s,passive:o}),d=!0)},u=l=>{if(r)return;const c=h(l);c&&d&&(c.removeEventListener(n,e,s),d=!1)};O(()=>u(i)),R(()=>u(i)),_(()=>a(i));let m;return A(i)&&(m=E(i,(l,c)=>{u(c),a(l)})),()=>{m==null||m(),u(i),r=!0}}var f,g;function j(){if(!f&&(f=v(0),g=v(0),w)){const n=()=>{f.value=window.innerWidth,g.value=window.innerHeight};n(),window.addEventListener("resize",n,{passive:!0}),window.addEventListener("orientationchange",n,{passive:!0})}return{width:f,height:g}}var p;function Z(){if(!p&&(p=v("visible"),w)){const n=()=>{p.value=document.hidden?"hidden":"visible"};n(),window.addEventListener("visibilitychange",n)}return p}var F=Symbol("van-field");function nn(n){const e=k(F,null);e&&!e.customValue.value&&(e.customValue.value=n,E(n,()=>{e.resetValidation(),e.validateWithTrigger("onChange")}))}function T(n,e){"scrollTop"in n?n.scrollTop=e:n.scrollTo(n.scrollX,e)}function U(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Y(n){T(window,n),T(document.body,n)}const z=B();function en(){z&&Y(U())}const J=n=>n.stopPropagation();function tn(n,e){(typeof n.cancelable!="boolean"||n.cancelable)&&n.preventDefault(),e&&J(n)}function on(n){const e=h(n);if(!e)return!1;const t=window.getComputedStyle(e),i=t.display==="none",o=e.offsetParent===null&&t.position!=="fixed";return i||o}const{width:sn,height:rn}=j();export{F as C,Q as a,nn as b,q as c,J as d,$ as e,rn as f,U as g,Z as h,on as i,X as j,tn as p,en as r,Y as s,G as u,sn as w};
